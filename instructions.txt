Crea el projecte Laraval

.env

Canviar a mysql. Incloure les dades de la base de dades

Incloure idiones "es"

composer update (no es necessari)

npm install

php artisan key:generate

-------------------------------------------------------------------------------

INICI CURS

php artisan make:model Product -m

Omplir la Migració del model

Al Model omplir els fillables

Instal·lar filamen4 4

https://filamentphp.com/docs/4.x/introduction/installation

composer require filament/filament:"^4.0"

php artisan filament:install --panels

Panel ID admin

Al DatabaSeeder hi ha un usuari generat per defecte. Per a crear-lo

php artisan db:seed

Podem crear l'susari aamb la instrcció de filament:

php artisan make:filament-user

Jordi Llobet
jordillps@gmail.com
12345678

Model user afegir

Sistema de seguretat de Filament (Poden accedir al panell complet de filament)

use Filament\Panel;
implements FilamentUser
//Poden acceder al panell complet de Filament  todos los usuarios  
    public function canAccessPanel(Panel $panel): bool
    {
        return true;
    }

Configuració  AdminPanelProvider:

Afegir:
registration()
emailVerification()
colors()

---------------------------------------------------------------------------------------
REATLIZAR UN CRUD

crear Prodcut Factory
php artisan make:factory ProductFactory

DatabaSeeder crear productes de prova

php artisan migrate:fresh --seed

php artisan make:filament-resource Product

What is the title attribute for this model? 'Producto' Es pot deixar en blanc

Would you like to generate a read-only view page for the resource? yes
yes Cree les columnes uatomaticament

Configurar que després editar/crear vagi a la llista de productes (CreateProduct, EditProduct)

protected function getRedirectUrl(): string


Es pot fer gloablament a AdminPanelProvider

->resourceEditPageRedirect('index')
->resourceCreatePageRedirect('index')

Afegir "delete" a les taules: ProductTable

 DeleteAction::make(),

-------------------------------------------------------------------------------------

CERCA, VALIDACIO, ORDENAR COLUMNES

VALIDACIO

Afegir al form requiered

ProductsTable
sorttable()

-----------------------------------------------------------------------------------

COLUMNA EN FORMATO MONEDA, 


--------------------------------------------------------------------------------------

Crear Enum per l'estatus dels productes

php artisan make:enum Enums/ProductStatusEnum --string

Afegim el camp a la taula a través de la migració:

php artisan make:migration add_status_to_products_table

Omplir la migració amb un valor default 

php artisan migrate

Actualitzar la taula prodcutes i el formulari per afegir el nou camp "status"


Creem el nou model "Categrory"

php artisan make:model Category -m

Afegim la "Category" a la taula de productes

Afegir el nou camp a fillable

Afegir a la taula i al form

php artisan migrate


------------------------------------------------------------------------------------------------

Creem una taula per les categories no un recurs

php artisan make:filament-table CategoriesTable

Afegir el codi a ProductsForm

Si ho fem d'aquesta manera des de al editar un producte prodem accedir a la taula de categories


-------------------------------------------------------------------------------------------------

NEW RESOURCE CATEGORYES

php artisan make:filament-resource Category --simple --generate

--simple: edit forms en una finestra modal
--generate: gerenar les columns des de la base de dades (normalment ho pregunta i posem yes)

ToggleHidenByDefault : Podem escollir si volem que es visualitzi a la taula. Per defecte no es visualitza

Afegir la relació Categories Model a Products

Afegir a la taula catwegories un camp amb els prodcutes de cada  categoria

-----------------------------------------------------------------------------------

RELACIONS mANY TO mANY

php artisan make:model Tag -m

php artisan make:migration create_product_tag_table

Afegim el camp nom a la migració

php artisan migrate

Afegim fillable i relacions al Model Tag

Gerenem el nou recurs:

php artisan make:filament-resource Tag --simple --generate

Afegim el camp select multiple a prodcutform

Una altra forma es crear una relació que ens proporciona Filament 

php artisan make:filament-relation-manager ProductResurce tags name

Products\ProductResurce

No a totes les preguntes

BelongsToMany

Cal afegir-la a ProductResurce:
 TagsRelationManager::class

 Surt una taula d'etiquetes al editar productes

Afegir TextColumn::make('tags.name') a ProductsTable

-------------------------------------------------------------------------------------